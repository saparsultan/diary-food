import React, { forwardRef } from "react";
import DatePicker, { registerLocale } from "react-datepicker";
import ru from "date-fns/locale/ru";
import "react-datepicker/dist/react-datepicker.css";
registerLocale("ru", ru);

const SelectDate = ({ selected, handleSelectDate }) => {
  const ExampleCustomInput = forwardRef(({ value, onClick }, ref) => (
    <button className="custom-input" onClick={onClick} ref={ref}>
      <span>
        {value}
      </span>
      <svg
        width="17"
        height="16"
        viewBox="0 0 17 16"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <g clipPath="url(#clip0_121_69)">
          <path
            d="M5.05128 0C5.39115 0 5.66666 0.275539 5.66666 0.615434V1.9681H11.3302V0.615434C11.3302 0.275539 11.6057 0 11.9455 0C12.2854 0 12.5609 0.275539 12.5609 0.615434V1.9681H14.6538C15.6734 1.9681 16.5 2.79472 16.5 3.81441V14.1537C16.5 15.1734 15.6734 16 14.6538 16H2.34615C1.32655 16 0.5 15.1734 0.5 14.1537V3.81441C0.5 2.79472 1.32655 1.9681 2.34615 1.9681H4.4359V0.615434C4.4359 0.275539 4.71142 0 5.05128 0ZM4.4359 3.19898H2.34615C2.00629 3.19898 1.73077 3.47451 1.73077 3.81441V5.90753H15.2692V3.81441C15.2692 3.47451 14.9937 3.19898 14.6538 3.19898H12.5609V4.06186C12.5609 4.40176 12.2854 4.6773 11.9455 4.6773C11.6057 4.6773 11.3302 4.40176 11.3302 4.06186V3.19898H5.66666V4.06186C5.66666 4.40176 5.39115 4.6773 5.05128 4.6773C4.71142 4.6773 4.4359 4.40176 4.4359 4.06186V3.19898ZM15.2692 7.13839H1.73077V14.1537C1.73077 14.4936 2.00629 14.7691 2.34615 14.7691H14.6538C14.9937 14.7691 15.2692 14.4936 15.2692 14.1537V7.13839ZM3.45192 9.23088C3.45192 8.75504 3.83765 8.36928 4.31346 8.36928C4.78928 8.36928 5.175 8.75504 5.175 9.23088C5.175 9.70672 4.78928 10.0925 4.31346 10.0925C3.83765 10.0925 3.45192 9.70672 3.45192 9.23088ZM7.63782 9.23088C7.63782 8.75504 8.02354 8.36928 8.49936 8.36928C8.9752 8.36928 9.36088 8.75504 9.36088 9.23088C9.36088 9.70672 8.9752 10.0925 8.49936 10.0925C8.02354 10.0925 7.63782 9.70672 7.63782 9.23088ZM11.8205 9.23088C11.8205 8.75504 12.2062 8.36928 12.6821 8.36928C13.1578 8.36928 13.5436 8.75504 13.5436 9.23088C13.5436 9.70672 13.1578 10.0925 12.6821 10.0925C12.2062 10.0925 11.8205 9.70672 11.8205 9.23088ZM3.45192 12.6766C3.45192 12.2008 3.83765 11.815 4.31346 11.815C4.78928 11.815 5.175 12.2008 5.175 12.6766C5.175 13.1525 4.78928 13.5382 4.31346 13.5382C3.83765 13.5382 3.45192 13.1525 3.45192 12.6766ZM7.63782 12.6766C7.63782 12.2008 8.02354 11.815 8.49936 11.815C8.9752 11.815 9.36088 12.2008 9.36088 12.6766C9.36088 13.1525 8.9752 13.5382 8.49936 13.5382C8.02354 13.5382 7.63782 13.1525 7.63782 12.6766ZM11.8205 12.6766C11.8205 12.2008 12.2062 11.815 12.6821 11.815C13.1578 11.815 13.5436 12.2008 13.5436 12.6766C13.5436 13.1525 13.1578 13.5382 12.6821 13.5382C12.2062 13.5382 11.8205 13.1525 11.8205 12.6766Z"
            fill="#1C2035"
            fillOpacity="0.72"
          />
        </g>
        <defs>
          <clipPath id="clip0_121_69">
            <rect
              width="16"
              height="16"
              fill="white"
              transform="translate(0.5)"
            />
          </clipPath>
        </defs>
      </svg>
    </button>
  ));

  return (
    <div className="form-item">
      <label className="form-item__label" style={{marginBottom: "4px"}}>Выберите дату</label>
      <DatePicker
        selected={selected}
        onChange={(date) => handleSelectDate(date)}
        customInput={<ExampleCustomInput />}
        locale="ru"
        dateFormat="MMMM d, yyyy г."
      />
    </div>
  );
};

export default SelectDate;
